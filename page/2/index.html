<!DOCTYPE html>



  



<html class="theme-next pisces use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="/atom.xml" title="Linux知识库" type="application/atom+xml">






<meta property="og:type" content="website">
<meta property="og:title" content="Linux知识库">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Linux知识库">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Linux知识库">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/">





  <title>Linux知识库</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
	
	<a href="https://github.com/xiejia1215225"><img style="position: absolute; top: 0; right: 0; border: 0
	;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Linux知识库</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/03/31/文本三剑客之grep/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="谢 佳">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Linux知识库">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/03/31/文本三剑客之grep/" itemprop="url">文本三剑客之grep</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-31T00:00:00+08:00">
                2018-03-31
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="grep-and-Regular-Expressions"><a href="#grep-and-Regular-Expressions" class="headerlink" title="grep and Regular Expressions"></a>grep and Regular Expressions</h1><p><img src="https://github.com/xiejia1215225/Pictures/blob/master/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%B0%81%E9%9D%A2.jpg?raw=true" alt=""></p>
<h2 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h2><p><img src="https://github.com/xiejia1215225/Pictures/blob/master/grep.jpg?raw=true" alt=""><br>&ensp;&ensp;&ensp;&ensp;grep: Global search REgular expression and Print out the line,是一款文本过滤工具。<br>&ensp;&ensp;&ensp;&ensp;作用：文本搜索工具，根据用户指定的“模式”对目标文本逐行进行匹配检查；打印匹配到的行。<br>&ensp;&ensp;&ensp;&ensp;模式：由正则表达式字符及文本字符所编写的过滤条件。<br>&ensp;&ensp;&ensp;&ensp;正则表达式REGEXP： Regular Expressions，由一类特殊字符及文本字符所编写的模式，其中有些字符（元字符）不表示字符字面意义，而表示控制或通配的功能。  </p>
<p>正则表达式分两类：  </p>
<ul>
<li>基本正则表达式： BRE</li>
<li>扩展正则表达式： ERE<br>grep工具支持基本正则表达式，egrep工具支持扩展的正则表达式，并且grep -E = egrep.</li>
</ul>
<h2 id="grep语法"><a href="#grep语法" class="headerlink" title="grep语法"></a><strong><em>grep语法</em></strong></h2><p>grep [OPTIONS] PATTERN [FILE…]   </p>
<ul>
<li>-v: 显示不被pattern匹配到的行  </li>
<li>-i: 忽略字符大小写  </li>
<li>-n： 显示匹配的行号  </li>
<li>-c: 统计匹配的行数  </li>
<li>-o: 仅显示匹配到的字符串    </li>
<li>-q: 静默模式，不输出任何信息  </li>
<li>-A #: after, 后#行  </li>
<li>-B #: before, 前#行  </li>
<li>-C #： context, 前后各#行</li>
<li>-e：实现多个选项间的逻辑or关系</li>
<li>-w：匹配整个单词</li>
<li>-E：使用ERE</li>
<li>-F：相当于fgrep，不支持正则表达式</li>
<li>-f file: 根据模式文件处理</li>
</ul>
<p><img src="https://github.com/xiejia1215225/Pictures/blob/master/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F.jpg?raw=true" alt=""></p>
<h2 id="基本正则表达式元字符"><a href="#基本正则表达式元字符" class="headerlink" title="基本正则表达式元字符"></a>基本正则表达式元字符</h2><h3 id="字符匹配"><a href="#字符匹配" class="headerlink" title="字符匹配"></a><strong><em>字符匹配</em></strong></h3><ul>
<li><p>.  &ensp; &ensp;&ensp;&ensp;匹配任意单个字符</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost data]<span class="comment">#grep "r..t" /etc/passwd </span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br><span class="line">ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin</span><br></pre></td></tr></table></figure>
</li>
<li><p>[] &ensp; &ensp;&ensp;匹配指定范围内的任意单个字符，示例:[wang] [0-9] [a-z] [a-zA-Z]</p>
</li>
<li>[^] &ensp;&ensp;匹配指定范围外的任意单个字符</li>
<li>[:alnum:] 字母和数字</li>
<li>[:alpha:] 代表任何英文大小写字符，亦即 A-Z, a-z</li>
<li>[:lower:] 小写字母,亦即 a-z  </li>
<li>[:upper:] 大写字母,亦即 A-Z</li>
<li>[:blank:] 空白字符（空格和制表符）</li>
<li>[:space:] 水平和垂直的空白字符（比[:blank:]包含的范围广）</li>
<li>[:cntrl:] 不可打印的控制字符（退格、删除、警铃…）</li>
<li>[:digit:] 十进制数字   </li>
<li>[:xdigit:] 十六进制数字</li>
<li>[:graph:] 可打印的非空白字符</li>
<li>[:print:] 可打印字符</li>
<li>[:punct:] 标点符号<br>例  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost data]<span class="comment">#ifconfig ens33 | grep netmask | grep "[[:digit:]]."</span></span><br><span class="line">        inet 192.168.183.132  netmask 255.255.255.0  broadcast 192.168.183.255</span><br><span class="line">等价于</span><br><span class="line">[root@localhost data]<span class="comment">#ifconfig ens33 | grep netmask | grep "[0-9]."      </span></span><br><span class="line">        inet 192.168.183.132  netmask 255.255.255.0  broadcast 192.168.183.255</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="次数匹配"><a href="#次数匹配" class="headerlink" title="次数匹配"></a><strong><em>次数匹配</em></strong></h3><p><code>用在要指定次数的字符后面，用于指定前面的字符要出现的次数</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">*  匹配前面的字符任意次，包括0次  </span><br><span class="line">贪婪模式：尽可能长的匹配.默认正则表达式为贪婪模式  </span><br><span class="line">.* 任意长度的任意字符  </span><br><span class="line">\? 匹配其前面的字符0或1次  </span><br><span class="line">\+ 匹配其前面的字符至少1次  </span><br><span class="line">\&#123;n\&#125; 匹配前面的字符n次  </span><br><span class="line">\&#123;m,n\&#125; 匹配前面的字符至少m次，至多n次  </span><br><span class="line">\&#123;,n\&#125; 匹配前面的字符至多n次  </span><br><span class="line">\&#123;n,\&#125; 匹配前面的字符至少n次正则表达式</span><br></pre></td></tr></table></figure></p>
<p>例:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost data]<span class="comment">#ifconfig ens33 | grep "[0-9]\&#123;1,3\&#125;"    </span></span><br><span class="line">ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.183.132  netmask 255.255.255.0  broadcast 192.168.183.255</span><br><span class="line">        inet6 fe80::bf41:5d04:86fa:37c9  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:30:79:38  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 7676  bytes 850492 (830.5 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 6678  bytes 2198697 (2.0 MiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">例:只显示ifconfig ens33 的ip</span><br><span class="line"></span><br><span class="line">[root@localhost data]<span class="comment">#ifconfig ens33 | grep -o  "[0-9]\&#123;1,3\&#125;\.[0-9]\&#123;1,3\&#125;\.[0-9]\&#123;1,3\&#125;\.[0-9]\&#123;1,3\&#125;"</span></span><br><span class="line">192.168.183.132</span><br><span class="line">255.255.255.0</span><br><span class="line">192.168.183.255</span><br></pre></td></tr></table></figure></p>
<h3 id="位置锚定"><a href="#位置锚定" class="headerlink" title="位置锚定"></a><strong><em>位置锚定</em></strong></h3><p><code>定位出现的位置</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">* ^ 行首锚定，用于模式的最左侧  </span><br><span class="line">* $ 行尾锚定，用于模式的最右侧  </span><br><span class="line">* ^PATTERN$ 用于模式匹配整行  </span><br><span class="line">* ^$ 空行  </span><br><span class="line">* ^[[:space:]]*$ 空白行</span><br><span class="line">* \&lt; 或 \b 词首锚定，用于单词模式的左侧  </span><br><span class="line">* \&gt; 或 \b 词尾锚定，用于单词模式的右侧  </span><br><span class="line">* \&lt;PATTERN\&gt; 匹配整个单词正则表达式</span><br></pre></td></tr></table></figure></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">例:只显示/etc/fstab非空的行</span><br><span class="line"></span><br><span class="line">[root@localhost data]<span class="comment">#cat /etc/fstab  | grep  -v "^#" | grep -v "^$"</span></span><br><span class="line">UUID=d33ffb51-004a-4c4d-ac00-c40b9e2c2920 /                       xfs     defaults        0 0</span><br><span class="line">UUID=7d1b5c8d-8054-4496-befe-267963e07605 /boot                   xfs     defaults        0 0</span><br><span class="line">UUID=7556e4a8-128e-457f-99f7-3f1ccf517952 /data                   xfs     defaults        0 0</span><br><span class="line">UUID=152e9015-e93a-44f9-8c7d-65fe67fb5201 swap                    swap    defaults        0 0</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">显示以root为单词词首的行</span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment">#grep "\&lt;root" /etc/passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">operator:x:11:0:operator:/root:/sbin/nologin</span><br></pre></td></tr></table></figure>
<h3 id="分组"><a href="#分组" class="headerlink" title="_分组_"></a><strong>_分组_</strong></h3><p><code>\(\) 将一个或多个字符捆绑在一起，当作一个整体处理，如： \(root\)\+</code>  </p>
<ul>
<li>分组括号中的模式匹配到的内容会被正则表达式引擎记录于内部的变量中，这些<br>变量的命名方式为: \1, \2, \3, …  </li>
<li><p>\1 表示从左侧起第一个左括号以及与之匹配右括号之间的模式所匹配到的字符</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">\(string1\+\(string2\)*\)</span><br><span class="line">\1 ： string1\+\(string2\)*</span><br><span class="line">\2 ： string2</span><br></pre></td></tr></table></figure>
</li>
<li><p>后向引用：引用前面的分组括号中的模式所匹配字符(结果)， 而非模式本身</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment">#cat f1</span></span><br><span class="line">123ab123xxy123</span><br><span class="line">234xxx567</span><br><span class="line">[root@localhost ~]<span class="comment">#cat f1 | grep "\([0-9]\)\&#123;3\&#125;.*\1"</span></span><br><span class="line">123ab123xxy123</span><br></pre></td></tr></table></figure>
</li>
<li><p>或者：\|<br>示例： a\|b: a或b C\|cat: C或cat \(C\|c\)at:Cat或cat</p>
</li>
</ul>
<h2 id="扩展的正则表达式"><a href="#扩展的正则表达式" class="headerlink" title="扩展的正则表达式"></a>扩展的正则表达式</h2><p>egrep [OPTIONS] PATTERN [FILE…]</p>
<h3 id="字符匹配-1"><a href="#字符匹配-1" class="headerlink" title="字符匹配"></a><strong><em>字符匹配</em></strong></h3><ul>
<li>. 任意单个字符  </li>
<li>[] 指定范围的字符  </li>
<li>[^] 不在指定范围的字符<br>基本和正则表达式相同</li>
</ul>
<h3 id="次数匹配-1"><a href="#次数匹配-1" class="headerlink" title="次数匹配"></a><strong><em>次数匹配</em></strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">*  匹配前面的字符任意次，包括0次  </span><br><span class="line">.* 任意长度的任意字符  </span><br><span class="line">?  匹配其前面的字符0或1次  </span><br><span class="line">+  匹配其前面的字符至少1次  </span><br><span class="line">&#123;n&#125;   匹配前面的字符n次  </span><br><span class="line">&#123;m,n&#125; 匹配前面的字符至少m次，至多n次  </span><br><span class="line">&#123;,n&#125;  匹配前面的字符至多n次  </span><br><span class="line">&#123;n,&#125;  匹配前面的字符至少n次正则表达式</span><br></pre></td></tr></table></figure>
<h3 id="位置锚定-1"><a href="#位置锚定-1" class="headerlink" title="位置锚定"></a><strong><em>位置锚定</em></strong></h3><p>扩展正则表达式的位置锚定和基本正则表达式相同。</p>
<h3 id="分组-1"><a href="#分组-1" class="headerlink" title="_分组_"></a><strong>_分组_</strong></h3><p>( )的内容不需要用<code>\</code>转义</p>
<ul>
<li>或者：|<br>示例： a|b: a或b C|cat: C或cat (C|c)at:Cat或cat</li>
</ul>
<h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><ol>
<li>利用df和grep，取出磁盘各分区利用率，并从大到小排序<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df | grep /dev/sd | grep -o <span class="string">"[0-9]\+%"</span> | grep -o <span class="string">"[0-9]\+"</span> |sort -nr</span><br></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df | grep  -E /dev/sd | grep -oE <span class="string">"[0-9]+%"</span> | grep -Eo <span class="string">"[0-9]+"</span> |sort -nr</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>显示ifconfig命令结果中所有IPv4地址<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig ens33 | grep -o <span class="string">"\&lt;\(\([0-1][0-9]\?\&#123;2\&#125;\|2[0-4][0-9]\|25[0-5]\)\.\)\&#123;3\&#125;\([0-1][0-9]\?\&#123;2\&#125;\|2[0-4][0-9]\|25[0-5]\)\&gt;"</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig ens33 | egrep -o <span class="string">"\&lt;(([0-1][0-9]?&#123;2&#125;|2[0-4][0-9]|25[0-5])\.)&#123;3&#125;([0-1][0-9]?&#123;2&#125;|2[0-4][0-9]|25[0-5])\&gt;"</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>找出/etc/passwd用户名和shell同名的行<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">"^\([[:alnum:]]\&#123;1,\&#125;\):.*\1$"</span> /etc/passwd</span><br></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -E <span class="string">"^([[:alnum:]]&#123;1,&#125;):.*\1$"</span> /etc/passwd</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>手机号<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -o <span class="string">"1[34578][0-9]\&#123;9\&#125;"</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -Eo <span class="string">"1[34578][0-9]&#123;9&#125;"</span></span><br></pre></td></tr></table></figure>
<ol start="5">
<li>使用egrep取出/etc/rc.d/init.d/functions中其基名  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> /etc/rc.d/init.d/<span class="built_in">functions</span>/ | grep -o  <span class="string">"[^/]\+/\?$"</span> | grep -o <span class="string">".*[^/]"</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> /etc/rc.d/init.d/<span class="built_in">functions</span>/ | egrep -o  <span class="string">"[^/]+/?$"</span> | egrep -o <span class="string">".*[^/]"</span></span><br></pre></td></tr></table></figure>
<ol start="6">
<li>显示CentOS7的/etc/grub2.cfg文件中，至少以一个空白字符开头的且后面有非空白字符的行<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">"^[[:space:]]\+[^[:space:]]"</span> /etc/grub2.cfg</span><br></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -E <span class="string">"^[[:space:]]+[^[:space:]]"</span> /etc/grub2.cfg</span><br></pre></td></tr></table></figure>
<p><img src="https://github.com/xiejia1215225/Pictures/blob/master/Linux%E6%A0%87%E5%BF%97.jpg?raw=true" alt=""></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/10/浅议linux中的硬链接和软链接/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="谢 佳">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Linux知识库">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/10/浅议linux中的硬链接和软链接/" itemprop="url">浅议linux中的硬链接和软链接</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-02-10T00:00:00+08:00">
                2018-02-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="链接文件的概念"><a href="#链接文件的概念" class="headerlink" title="链接文件的概念"></a>链接文件的概念</h1><p>&ensp;&ensp;&ensp;&ensp;Linux中的链接文件就相当于是Windows中的快捷方式，通过链接文件可以访问到链接指向的源文件。但是Linux下的链接文件和Windows中的快捷方式还是有一定的区别。Linux中有两种链接文件分别为硬链接和软链接（也称为符号链接）。在介绍链接文件之前先要介绍一下Linux文件系统中的inode。</p>
<h1 id="节点的概念"><a href="#节点的概念" class="headerlink" title="节点的概念"></a>节点的概念</h1><p>&ensp;&ensp;&ensp;&ensp;我们都知道文件数据都是储存在硬盘的”块”区域中。那么很显然，我们还必须找一块区域储存文件的元数据信息，比如文件的创建者、文件的创建时间、文件的大小等等，这种存储文件元数据信息的区域就叫做inode，中文译名为”索引节点”</p>
<p>Inode（索引节点）包含有关文件的信息（元数据），具体有如下内容：</p>
<ul>
<li>文件类型，权限，UID，GID  </li>
<li>链接数（指向这个文件名路径名称个数）  </li>
<li>该文件的大小和不同的时间戳  </li>
<li>指向磁盘上文件的数据块指针  </li>
<li>有关文件的其他数据  </li>
</ul>
<p>我们可以使用stat命令来查看某个文件的inode的信息：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment">#stat /data/f1</span></span><br><span class="line">  File: ‘/data/f1’</span><br><span class="line">  Size: 0               Blocks: 0          IO Block: 4096   regular empty file</span><br><span class="line">Device: 803h/2051d      Inode: 67          Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Context: unconfined_u:object_r:etc_runtime_t:s0</span><br><span class="line">Access: 2018-09-29 10:34:06.156131723 +0800</span><br><span class="line">Modify: 2018-09-29 10:34:06.156131723 +0800</span><br><span class="line">Change: 2018-09-29 10:34:06.156131723 +0800</span><br><span class="line"> Birth: -</span><br></pre></td></tr></table></figure></p>
<p><code>注意：文件名是不存在inode中的！！!</code>  </p>
<p>查看每个硬盘分区的inode总数和使用的数量，可以用<code>df -i</code> 来查看:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment">#df -i</span></span><br><span class="line">Filesystem       Inodes  IUsed    IFree IUse% Mounted on</span><br><span class="line">/dev/sda2      26214400 122731 26091669    1% /</span><br><span class="line">devtmpfs         229181    397   228784    1% /dev</span><br><span class="line">tmpfs            233163      1   233162    1% /dev/shm</span><br><span class="line">tmpfs            233163    881   232282    1% /run</span><br><span class="line">tmpfs            233163     16   233147    1% /sys/fs/cgroup</span><br><span class="line">/dev/sda1        524288    327   523961    1% /boot</span><br><span class="line">/dev/sda3      15728640      4 15728636    1% /data</span><br><span class="line">tmpfs            233163      9   233154    1% /run/user/42</span><br><span class="line">tmpfs            233163      1   233162    1% /run/user/0</span><br></pre></td></tr></table></figure></p>
<p>空间满了和inode用光了都报<code>No space left on device</code></p>
<p>下图就是磁盘空间占满了提示：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost data]<span class="comment">#dd if=/dev/zero of=/boot/bigfile bs=1M count=860</span></span><br><span class="line">dd: error writing ‘/boot/bigfile’: No space left on device</span><br><span class="line">850+0 records <span class="keyword">in</span></span><br><span class="line">849+0 records out</span><br><span class="line">890306560 bytes (890 MB) copied, 2.25818 s, 394 MB/s</span><br><span class="line"></span><br><span class="line">[root@localhost data]<span class="comment">#df -h /dev/sda1</span></span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/sda1      1014M 1014M  336K 100% /boot</span><br><span class="line"></span><br><span class="line">[root@localhost data]<span class="comment">#df -i /dev/sda1 </span></span><br><span class="line">Filesystem     Inodes IUsed IFree IUse% Mounted on</span><br><span class="line">/dev/sda1        1184   328   856   28% /boot</span><br></pre></td></tr></table></figure></p>
<p>下图就是inode用光的提示：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost dir1]<span class="comment">#df -i /dev/sda1</span></span><br><span class="line">Filesystem     Inodes  IUsed IFree IUse% Mounted on</span><br><span class="line">/dev/sda1      524288 524288     0  100% /boot</span><br><span class="line"></span><br><span class="line">也会报</span><br><span class="line">touch: cannot touch ‘f524284’: No space left on device</span><br><span class="line">touch: cannot touch ‘f524285’: No space left on device</span><br><span class="line">touch: cannot touch ‘f524286’: No space left on device</span><br></pre></td></tr></table></figure></p>
<p>每个inode都有一个号码，操作系统用inode号码来识别不同的文件。对于系统来说，文件名只是inode号码便于识别的别称和绰号。表面上，用户通过文件名，打开文件。实际上，系统内部这个过程分成三步：首先，系统找到这个文件名对应的inode号码；其次，通过inode号码，获取inode信息；最后，根据inode信息，找到文件所在的block，读出数据。</p>
<p><img src="https://s1.51cto.com/images/20180329/1522294130887366.png" alt="http://s1.51cto.com"></p>
<p>使用<code>ls -i</code>命令，可以看出文件名对应的inode号码：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment">#ls -i /data/f1</span></span><br><span class="line">67 /data/f1</span><br></pre></td></tr></table></figure></p>
<h1 id="硬链接"><a href="#硬链接" class="headerlink" title="硬链接"></a>硬链接</h1><p>一般情况下，文件名和inode号码是”一一对应”关系，每个inode号码对应一个文件名。但是，Linux系统允许多个文件名指向同一个inode号码。这意味着，可以用不同的文件名访问同样的内容；对文件内容进行修改，会影响到所有文件名;删除一个文件名，不影响另一个文件名的访问。这种情况就被称为:硬链接”(hard link)。可以通过ln命令来创建硬链接：<br>&ensp;&ensp;&ensp;&ensp;ln&ensp; 源文件&ensp; 目标文件   </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost data]<span class="comment">#ls</span></span><br><span class="line">2.txt  f1</span><br><span class="line">[root@localhost data]<span class="comment">#ln 2.txt 22.txt</span></span><br><span class="line">[root@localhost data]<span class="comment">#ls</span></span><br><span class="line">22.txt  2.txt  f1</span><br><span class="line">[root@localhost data]<span class="comment">#ll -i</span></span><br><span class="line">total 8</span><br><span class="line">68 -rw-r--r--. 2 root root 22 Sep 25 15:41 22.txt</span><br><span class="line">68 -rw-r--r--. 2 root root 22 Sep 25 15:41 2.txt</span><br><span class="line">67 -rw-r--r--. 1 root root  0 Sep 25 14:16 f1</span><br></pre></td></tr></table></figure>
<ul>
<li><p>创建文件时链接数递增  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost data]<span class="comment">#ll -i f1</span></span><br><span class="line">67 -rw-r--r--. 1 root root 0 Sep 29 10:34 f1</span><br><span class="line">[root@localhost data]<span class="comment">#ln f1 f11</span></span><br><span class="line">[root@localhost data]<span class="comment">#ll -i f1 f11</span></span><br><span class="line">67 -rw-r--r--. 2 root root 0 Sep 29 10:34 f1</span><br><span class="line">67 -rw-r--r--. 2 root root 0 Sep 29 10:34 f11</span><br></pre></td></tr></table></figure>
</li>
<li><p>不能跨越驱动器或分区  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost data]<span class="comment">#ln /data/f2 /root/f22</span></span><br><span class="line">ln: failed to create hard link ‘/root/f22’ =&gt; ‘/data/f2’: Invalid cross-device link</span><br></pre></td></tr></table></figure>
</li>
<li><p>不支持文件夹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost data]<span class="comment">#ln dir1 dir11</span></span><br><span class="line">ln: ‘dir1’: hard link not allowed <span class="keyword">for</span> directory</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="软链接"><a href="#软链接" class="headerlink" title="软链接"></a>软链接</h1><p>除了硬链接以外，还有一种特殊情况。文件A和文件B的incode号码虽然不一样，但是文件A的内容就是文件B的路径。读取文件A时系统会自动将访问者导向文件B。因此，无论打开哪一个文件，最终读取的都是文件B。这时文件A就称为文件B的”软链接”(soft link)或者”符号链接”(symbolic link)可以通过ln -s命令来创建软链接：<br>&ensp;&ensp;&ensp;&ensp;ln -s &ensp;源文件或目录&ensp; 目标文件或目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost data]<span class="comment">#ll</span></span><br><span class="line">total 8</span><br><span class="line">-rw-r--r--. 2 root root 22 Sep 25 15:41 22.txt</span><br><span class="line">-rw-r--r--. 2 root root 22 Sep 25 15:41 2.txt</span><br><span class="line">-rw-r--r--. 1 root root  0 Sep 25 14:16 f1</span><br><span class="line">[root@localhost data]<span class="comment">#ln -s 2.txt 2.txt-link</span></span><br><span class="line">[root@localhost data]<span class="comment">#ll</span></span><br><span class="line">total 8</span><br><span class="line">-rw-r--r--. 2 root root 22 Sep 25 15:41 22.txt</span><br><span class="line">-rw-r--r--. 2 root root 22 Sep 25 15:41 2.txt</span><br><span class="line">lrwxrwxrwx. 1 root root  5 Sep 25 16:01 2.txt-link -&gt; 2.txt</span><br><span class="line">[root@localhost data]<span class="comment">#cat 2.txt</span></span><br><span class="line">学习使我快乐！</span><br><span class="line">[root@localhost data]<span class="comment">#cat 2.txt-link</span></span><br><span class="line">学习使我快乐！</span><br></pre></td></tr></table></figure>
<p>指向的是另一个文件的路径<br>其大小为指向的路径字符串的长度<br>不增加或减少目标文件inode的引用计数</p>
<h1 id="硬链接和软链接的区别"><a href="#硬链接和软链接的区别" class="headerlink" title="硬链接和软链接的区别"></a>硬链接和软链接的区别</h1><ol>
<li>是不是同一个文件? <strong><em>这是根本的原因</em></strong> </li>
</ol>
<ul>
<li>硬链接本质上是一个文件，只是有多个名字。</li>
<li>软链接不是同一个文件</li>
</ul>
<ol start="2">
<li>能不能跨分区？</li>
</ol>
<ul>
<li>硬链接不能跨分区</li>
<li>软链接可以跨分区</li>
</ul>
<ol start="3">
<li>链接数是否增长？  </li>
</ol>
<ul>
<li>硬链接的链接数会增加</li>
<li>软链接的链接数不会增加</li>
</ul>
<ol start="4">
<li>inode Number 是否相同？</li>
</ol>
<ul>
<li>硬链接的inode number完全一样</li>
<li>软链接的inode number不一样</li>
</ul>
<ol start="5">
<li>原始文件删除，链接文件可否访问？  </li>
</ol>
<ul>
<li>硬链接：原始文件与链接文件是平级关系，原始文件删除，链接文件可以继续访问。</li>
<li>软链接：原始文件删除，软链接就找不到路径，无法访问</li>
</ul>
<ol start="6">
<li>大小是否一样  </li>
</ol>
<ul>
<li>硬链接的大小就是存储原始文件的大小</li>
<li>软链接的大小就是它指向路径的大小</li>
</ul>
<ol start="7">
<li>支持目录？  </li>
</ol>
<ul>
<li>硬链接不支持目录</li>
<li>软链接支持目录</li>
</ul>
<ol start="8">
<li>相对路径？ </li>
</ol>
<ul>
<li>硬链接：相对路径是相对当前目录的路径</li>
<li>软链接：相对路径是相对软链接的路径</li>
</ul>
<p><img src="https://github.com/xiejia1215225/Pictures/blob/master/Linux%E6%A0%87%E5%BF%97.jpg?raw=true" alt=""></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/03/Linux用户、组和权限管理/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="谢 佳">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Linux知识库">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/03/Linux用户、组和权限管理/" itemprop="url">Linux用户、组和权限管理</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-02-03T00:00:00+08:00">
                2018-02-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Linux-用户和用户组基础概念"><a href="#Linux-用户和用户组基础概念" class="headerlink" title="Linux 用户和用户组基础概念"></a>Linux 用户和用户组基础概念</h1><p>&ensp;&ensp;&ensp;&ensp; Linux系统是一个多用户多任务的分时操作系统，任何一个要使用系统资源的用户，都必须首先向系统管理员申请一个账号，然后以这个账号的身份进入系统。</p>
<h2 id="用户、用户组的类别："><a href="#用户、用户组的类别：" class="headerlink" title="用户、用户组的类别："></a>用户、用户组的类别：</h2><ul>
<li><p>用户user  </p>
<blockquote>
<p>Linux用户： Username/UID  </p>
<blockquote>
<p>管理员： root, 0<br>普通用户： 1-60000 自动分配  </p>
<blockquote>
<p>系统用户： 1-499, 1-999 （CentOS7） 对守护进程获取资源进行权限分配<br>登录用户： 500+, 1000+（CentOS7）通过交互式方式登录  </p>
</blockquote>
</blockquote>
</blockquote>
</li>
<li><p>组group  </p>
<blockquote>
<p>Linux组： Groupname/GID  </p>
<blockquote>
<p>管理员组： root, 0<br>普通组：  </p>
<blockquote>
<p>系统组： 1-499, 1-999（centos7）<br>普通组： 500+, 1000+（centos7）  </p>
</blockquote>
</blockquote>
</blockquote>
</li>
</ul>
<p>对于一个用户而言可以有不同的组，分别称为用户的基本组（主组）和附加组；基本组组名与用户名相同，且仅包含一个用户，也叫私有组。基本组以外的的组属于用户的附加组。  </p>
<p><code>判断用户和组是不是管理员，不是根据名字叫root来判断的，而是根据UID和GID是不是等于0来判断的。等于0则为管理员，否则则不是。</code></p>
<h2 id="用户配置文件"><a href="#用户配置文件" class="headerlink" title="用户配置文件"></a>用户配置文件</h2><ul>
<li><p>用户及其属性信息(名称、 UID、主组ID等）：/etc/passwd</p>
</li>
<li><p>组及其属性信息：/etc/group</p>
</li>
<li><p>用户密码及相关属性：/etc/shadow</p>
</li>
<li><p>组密码及相关属性：/etc/gshadow</p>
</li>
</ul>
<h2 id="etc-passwd"><a href="#etc-passwd" class="headerlink" title="/etc/passwd"></a>/etc/passwd</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment">#cat /etc/passwd</span></span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">bin:x:1:1:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:2:2:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:3:4:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin</span><br></pre></td></tr></table></figure>
<p>/etc/passwd中一行记录对应着一个用户，每行记录又被冒号(:)分隔为7个字段：</p>
<ul>
<li>用户名:口令:UID:GID:注释性描述:主目录:登录Shell类型</li>
</ul>
<p>系统中有一类用户称为系统用户，这些用户在/etc/passwd文件中也占有一条记录，但是不能登录，因为它们的登录Shell为空。它们的存在主要是方便系统管理，满足相应的系统进程对文件属主的要求.<br>系统用户含义:<br>bin 拥有可执行的用户命令文件<br>sys 拥有系统文件<br>adm 拥有帐户文件<br>uucp UUCP使用<br>lp lp或lpd子系统使用<br>nobody NFS使用  </p>
<h2 id="etc-group"><a href="#etc-group" class="headerlink" title="/etc/group"></a>/etc/group</h2><p>当一个用户同时是多个组中的成员时，在/etc/passwd文件中记录的是用户所属的主组，也就是登录时所属的默认组，而其他组称为附加组。</p>
<p>用户要访问属于附加组的文件时，必须首先使用newgrp命令使自己成为所要访问的组中的成员。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment">#cat /etc/group</span></span><br><span class="line">root:x:0:</span><br><span class="line">bin:x:1:</span><br><span class="line">daemon:x:2:</span><br><span class="line">sys:x:3:</span><br><span class="line">adm:x:4:</span><br><span class="line">tty:x:5:</span><br><span class="line">disk:x:6:</span><br><span class="line">lp:x:7:</span><br></pre></td></tr></table></figure></p>
<p>此文件的格式也类似于/etc/passwd文件，由冒号(:)隔开若干个字段，这些字段有：</p>
<ul>
<li>组名:口令:组标识号:组内用户列表</li>
</ul>
<p>组名:是用户组的名称，由字母或数字构成。与/etc/passwd中的登录名一样，组名不应重复。<br>口令:字段存放的是用户组加密后的口令字。<br>组标识号:与用户标识号类似，也是一个整数，被系统内部用来标识组。<br>组内用户列表:是属于这个组的所有用户的列表，不同用户之间用逗号(,)分隔。这个用户组可能是用户的主组，也可能是附加组</p>
<h2 id="etc-shadow"><a href="#etc-shadow" class="headerlink" title="/etc/shadow"></a>/etc/shadow</h2><p>/etc/shadow文件用于单独存放加密后的口令字，只有超级用户才拥有该文件读权限<br><code>注意：/etc/shadow中的记录行与/etc/passwd中的一一对应，它由pwconv命令根据/etc/passwd中的数据自动产生</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment">#cat /etc/shadow</span></span><br><span class="line">root:<span class="variable">$6</span><span class="variable">$9T5n</span>/VcnCXrseL/f<span class="variable">$Nqs3zA</span>.hfJPXIrNtuiyUD9Ps6s.aGC.XYPrABjgPPABgvRIyMntuEkw2All7VhDQd5XM3AiN2RqAdwuoUfJ0K1::0:99999:7:::</span><br><span class="line">bin:*:17632:0:99999:7:::</span><br><span class="line">daemon:*:17632:0:99999:7:::</span><br><span class="line">adm:*:17632:0:99999:7:::</span><br><span class="line">lp:*:17632:0:99999:7:::</span><br></pre></td></tr></table></figure></p>
<p>它的文件格式与/etc/passwd类似，由若干个字段组成，字段之间用”:”隔开。这些字段是：</p>
<ul>
<li>登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标志<br><img src="https://github.com/xiejia1215225/Pictures/blob/master/%E5%AF%86%E7%A0%81%E6%9C%9F%E9%99%90.jpg?raw=true" alt=""></li>
</ul>
<p>登录名:/etc/passwd文件中的登录名相一致的用户账号<br>口令:字段存放的是加密后的用户口令字，长度为13个字符。如果为空，则对应用户没有口令，登录时不需要口令；<br>最后一次修改时间:表示的是从某个时刻起，到用户最后一次修改口令时的天数<br>最小时间间隔:指的是两次修改口令之间所需的最小天数<br>最大时间间隔:指的是口令保持有效的最大天数<br>警告时间:字段表示的是从系统开始警告用户到用户密码正式失效之间的天数<br>不活动时间:表示的是用户没有登录活动但账号仍能保持有效的最大天数<br>失效时间:字段给出的是一个绝对的天数，如果使用了这个字段，那么就给出相应账号的生存期。期满后，该账号就不再是一个合法的账号，也就不能再用来登录了。  </p>
<h2 id="etc-gshadow"><a href="#etc-gshadow" class="headerlink" title="/etc/gshadow"></a>/etc/gshadow</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment">#cat /etc/gshadow</span></span><br><span class="line">root:::</span><br><span class="line">bin:::</span><br><span class="line">daemon:::</span><br><span class="line">sys:::</span><br><span class="line">adm:::</span><br><span class="line">tty:::</span><br><span class="line">disk:::</span><br><span class="line">lp:::</span><br></pre></td></tr></table></figure>
<p>它的文件格式与/etc/group类似，由若干个字段组成，字段之间用”:”隔开。这些字段是：<br>群组名称：就是群组名称<br>群组密码：<br>组管理员列表：组管理员的列表，更改组密码和成员<br>以当前组为附加组的用户列表： (分隔符为逗号)</p>
<h1 id="用户和组的管理命令"><a href="#用户和组的管理命令" class="headerlink" title="用户和组的管理命令"></a>用户和组的管理命令</h1><p>用户管理命令  </p>
<blockquote>
<p>useradd(创建用户)<br>usermod(修改用户)<br>userdel(删除用户)</p>
</blockquote>
<p>组管理命令  </p>
<blockquote>
<p>groupadd(创建组)<br>groupmod(修改组)<br>groupdel(删除组)</p>
</blockquote>
<p>密码配置命令  </p>
<blockquote>
<p>passwd(设置用户密码)<br>gpasswd（设置组密码）</p>
</blockquote>
<h2 id="用户创建-useradd"><a href="#用户创建-useradd" class="headerlink" title="用户创建:useradd"></a>用户创建:useradd</h2><ul>
<li>useradd  [options] LOGIN  </li>
</ul>
<p>-u UID:用户ID的数字值。此值必须为唯一的，除非使用了-o选项。此值必须非负，默认使用大于等于UID_MIN，且大于任何其他用户ID最小值<br>-o 配合-u 选项，不检查UID的唯一性<br>-g GID：指明用户所属基本组，可为组名，也可以GID<br>-c “COMMENT”：用户的注释信息<br>-d HOME_DIR: 以指定的路径(不存在)为家目录<br>-s SHELL: 指明用户的默认shell程序，可用列表在/etc/shells文件中<br>-G GROUP1[,GROUP2,…]：为用户指明附加组，组须事先存在<br>-N 不创建私用组做主组，使用users组做主组<br>-r 创建系统用户 CentOS 6: ID&lt;500， CentOS 7: ID&lt;1000<br>-m 创建家目录，用于系统用户<br>-M 不创建家目录，用于非系统用户   </p>
<p>useradd -D：显示创建用户时的默认设置；<br>useradd -D  选项：设置某默认选项；  </p>
<p>例1：创建一个用户sam，为sam指定主目录为/usr/sam<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -d /usr/sam sam</span><br></pre></td></tr></table></figure></p>
<p>例2：创建用户gentoo，附加组为bin和root，默认shell为/bin/csh，注释信息为<br>“Gentoo Distribution”<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -c <span class="string">"Gentoo Distribution"</span> -G bin,root -s /bin/csh gentoo</span><br></pre></td></tr></table></figure></p>
<p>例3:新建用户gem，指定该用户的登录Shell是 /bin/sh，指定它属于group用户组，同时又属于adm和root用户组，其中group用户组是其主组。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">groupadd group</span><br><span class="line">groupadd adm</span><br><span class="line">useradd -s /bin/sh -g group –G <span class="string">"adm,root"</span> gem</span><br></pre></td></tr></table></figure></p>
<p>例4:创建下面的用户、组和组成员关系<br>名字为webs 的组<br>用户nginx 使用webs 作为附属组<br>用户varnish，也使用webs 作为附属组<br>用户mysql，不可交互登录系统，且不是webs 的成员， nginx， varnish，mysql密码都是magedu<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">groupadd webs</span><br><span class="line">useradd nginx -G webs</span><br><span class="line">useradd varnish -G webs</span><br><span class="line">useradd mysql -s /sbin/nologin</span><br><span class="line"><span class="built_in">echo</span> magedu | passwd --stdin nginx</span><br><span class="line"><span class="built_in">echo</span> magedu | passwd --stdin varnish</span><br><span class="line"><span class="built_in">echo</span> magedu | passwd --stdin mysql</span><br></pre></td></tr></table></figure></p>
<h2 id="用户属性修改-usermod"><a href="#用户属性修改-usermod" class="headerlink" title="用户属性修改:usermod"></a>用户属性修改:usermod</h2><p><code>注意：usermod不允许改变正在线上的使用者帐号名称。当usermod改变userID,必须确认这名user没在电脑上执行任何程序</code>  </p>
<ul>
<li>usermod [OPTION] login<br>-u UID: 新UID<br>-g GID: 新主组<br>-G GROUP1[,GROUP2,…[,GROUPN]]]：新附加组，原来的附加组将会被覆盖；若保留原有，则要同时使用-a选项<br>-s SHELL：新的默认SHELL<br>-c ‘COMMENT’：新的注释信息<br>-d HOME: 新家目录不会自动创建；若要创建新家目录并移动原家数据，同时使用-m选项<br>-l login_name: 新的名字<br>-L: lock指定用户,在/etc/shadow 密码栏的增加 !<br>-U: unlock指定用户,将 /etc/shadow 密码栏的 ! 拿掉<br>-e YYYY-MM-DD: 指明用户账号过期日期<br>-f INACTIVE: 设定非活动期限  </li>
</ul>
<h2 id="删除用户-userdel"><a href="#删除用户-userdel" class="headerlink" title="删除用户:userdel"></a>删除用户:userdel</h2><ul>
<li>userdel [OPTION]… login<br>-r：用户主目录中的文件将随用户主目录和用户邮箱一起删除</li>
</ul>
<h2 id="创建组-groupadd"><a href="#创建组-groupadd" class="headerlink" title="创建组:groupadd"></a>创建组:groupadd</h2><ul>
<li>groupadd [OPTION]… group_name<br>-g GID :指明GID,默认是上一个组的GID+1<br>-r:创建系统组，默认为1-999数字  </li>
</ul>
<h2 id="修改和删除组"><a href="#修改和删除组" class="headerlink" title="修改和删除组"></a>修改和删除组</h2><blockquote>
<p>组属性修改:groupmod  </p>
<ul>
<li>groupmod [OPTION]… group<br>-n group_name: 新名字<br>-g GID: 新的GID  </li>
</ul>
</blockquote>
<blockquote>
<p>组删除：groupdel<br>groupdel GROUP</p>
</blockquote>
<h2 id="passwd：密码设置常用命令"><a href="#passwd：密码设置常用命令" class="headerlink" title="passwd：密码设置常用命令"></a>passwd：密码设置常用命令</h2><p><code>以下命令只有root才有权限操作</code><br>passwd：修改自己的密码<br>passwd  username：修改其它用户的密码<br>-d：删除指定用户密码<br>-l： 锁定指定用户<br>-e：强制用户下次登录修改密码<br>-f：强制操作<br>-n mindays：指定最短使用期限<br>-x maxdays： 最大使用期限<br>-w warndays：提前多少天开始警告<br>-i inactivedays：非活动期限<br>–stdin：从标准输入接收用户密码<br>echo “PASSWORD” | passwd –stdin USERNAME<br>​                           </p>
<h2 id="更改组密码-gpasswd"><a href="#更改组密码-gpasswd" class="headerlink" title="更改组密码:gpasswd"></a>更改组密码:gpasswd</h2><ul>
<li>gpasswd [OPTION] GROUP<br>-a UserName：把用户添加至组中<br>-d UserName：从此组中移除此用户；</li>
<li>newgrp命令：登录到一个新组   </li>
<li>chage命令：修改用户账号的各种期限；修改账户或口令的期限设定<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1. 口令最短使用期限7天，最长使用期限30天，警告期3天，非活动期3天。          </span><br><span class="line">[root@localhost ~]<span class="comment"># chage -m7 -M30 -W3 -I3 mageedu          </span></span><br><span class="line">2. 修改口令最近一次修改时间，需转换为设定时间到1970年1月1日的天数          </span><br><span class="line">[root@localhost ~]<span class="comment"># chage -d16860 mageedu          </span></span><br><span class="line">3. 设置账户过期时间，需转换为设定时间到1970年1月1日的天数。          </span><br><span class="line">[root@localhost ~]<span class="comment"># chage -E16920 mageedu</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>chsh：更换登入系统时使用的shell,</p>
<p>chfn：提供使用者更改个人资讯,</p>
<p>finger：使用者查询一些其他使用者的资料,</p>
<p>pwck : 检查密码文件的完整性, </p>
<p>grpck：检查组文件的完整性</p>
<h2 id="su：切换用户"><a href="#su：切换用户" class="headerlink" title="su：切换用户"></a>su：切换用户</h2><ol>
<li>不读取目标用户的配置文件,不改变当前工作目录（非登录式切换，半切换)<br>su  UserName   </li>
<li>读取目标用户的配置文件,切换至家目录（登录式切换，完全切换)<br>su  -  UserName  </li>
<li>仅以指定的用户的身份运行此处指定的命令，而不执行真正的身份切换操作<br>su [-] UserName -c ‘COMMAND’<br><code>注意：root切换至任何其它用户无须认证密码；普通用户切换至其它用户，都需要密码</code>  </li>
</ol>
<h1 id="用户和用户组权限管理"><a href="#用户和用户组权限管理" class="headerlink" title="用户和用户组权限管理"></a>用户和用户组权限管理</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment">#ll -d /etc       # 显示文件名与相关属性命令</span></span><br><span class="line">drwxr-xr-x. 137 root root 12288 Oct 21 09:57 /etc</span><br></pre></td></tr></table></figure>
<ol>
<li>类型和权限(permission)：</li>
</ol>
<p><img src="https://github.com/xiejia1215225/Pictures/blob/master/%E6%96%87%E4%BB%B6%E5%B1%9E%E6%80%A7.png?raw=true" alt=""><br>显示格式：</p>
<ul>
<li>类型和权限  连接数  所有者   用户组   文件大小  修改日期   文件名</li>
</ul>
<ol start="2">
<li>权限组合机制：(8bites 二进制)</li>
</ol>
<p><img src="https://github.com/xiejia1215225/Pictures/blob/master/%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90.jpg?raw=true" alt=""></p>
<p>第二道十个字符：每三个为一组，均为’rwx’三个参数组合<br>rwxrwxrwx每个位置固定不定，若无则为空，用’-‘符号表示</p>
<p>r：readable, 读；w：writable, 写；x：excutable，执行</p>
<p>r=4    w=2   x=1 -=0</p>
<ol start="3">
<li>文件权限系统主要分为3类用户：</li>
</ol>
<p>属主：owner,u          属组：group,g       其他：other,o</p>
<p>其与之对应的权限:<br>​     rwx                rwx                     rwx</p>
<ol start="4">
<li>文件和目录的权限管理：</li>
</ol>
<p>对于文件的含义:  </p>
<blockquote>
<p>r：可获取文件的数据；可以使用类似于cat命令查看文件内容</p>
</blockquote>
<blockquote>
<p>w: 可修改文件的数据；可以编或者删除此文件</p>
</blockquote>
<blockquote>
<p>x：可将此文件运行为进程；可以在命令提示符下当做命令提交给内核运行</p>
</blockquote>
<p>对于目录的含义:</p>
<blockquote>
<p>r：可使用ls命令获取其下的所有文件列表；</p>
</blockquote>
<blockquote>
<p>w: 可修改此目录下的文件列表；即创建或删除文件；</p>
</blockquote>
<blockquote>
<p>x: 可cd至此目录中，且可使用ls -l来获取所有文件的详细属性信息；</p>
</blockquote>
<blockquote>
<p>X: 只针对目录添加x权限，不对目录下的文件添加x权限；</p>
</blockquote>
<h1 id="权限管理命令"><a href="#权限管理命令" class="headerlink" title="权限管理命令"></a>权限管理命令</h1><h2 id="chmod-更改文件目录权限"><a href="#chmod-更改文件目录权限" class="headerlink" title="chmod:更改文件目录权限"></a>chmod:更改文件目录权限</h2><p>用户类型：u：属主   g：属组   o：其它    a: 所有</p>
<p>chmod [OPTION]…  MODE[,MODE]… FILE…  </p>
<ol>
<li><p>赋权表示法：直接操作一类用户的所有权限位rwx<br>用等号表示：[u|g|o|a]=rwx中的一位或者多位 </p>
</li>
<li><p>授权表示法：直接操作一类用户的一个权限位r,w,x<br>用加减号表示：[u|g|o|a][+|-]rwx  </p>
</li>
</ol>
<p>chmod [OPTION]…  OCTAL-MODE FILE…<br>直接使用三位数字的方式给文件目录增加权限，分别表示所有者、所属组、其他人的权限<br>数字的表示方法同上：8bites 二进制表示权限的组合机制<br>r=4   w=2   x=1  三位相加<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@CentOS6 data]<span class="comment">#ll</span></span><br><span class="line">--w-------. 1 root root     0 Oct 21 20:29 f1</span><br><span class="line">[root@CentOS6 data]<span class="comment">#chmod 666 f1    #对 (u g o)添加读写权限</span></span><br><span class="line">[root@CentOS6 data]<span class="comment">#ll</span></span><br><span class="line">-rw-rw-rw-. 1 root root     0 Oct 21 20:29 f1</span><br></pre></td></tr></table></figure></p>
<p>chmod [OPTION]…  –reference=RFILE FILE…   参照某个文件的权限来进行授权操作<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@CentOS6 data]<span class="comment">#ll</span></span><br><span class="line">--w-------. 1 root root     0 Oct 21 20:29 f1</span><br><span class="line">-rw-r--r--. 1 root root     0 Oct 21 21:20 f2</span><br><span class="line">-rw-r--r--. 1 root root     0 Oct 21 21:20 f3</span><br><span class="line">[root@CentOS6 data]<span class="comment">#chmod --reference=f1 f2 f3</span></span><br><span class="line">[root@CentOS6 data]<span class="comment">#ll</span></span><br><span class="line">--w-------. 1 root root     0 Oct 21 20:29 f1</span><br><span class="line">--w-------. 1 root root     0 Oct 21 21:20 f2</span><br><span class="line">--w-------. 1 root root     0 Oct 21 21:20 f3</span><br></pre></td></tr></table></figure></p>
<p><code>注意：普通用户仅能修改属主为自己的那些文件的权限；root可以更改所有用户</code></p>
<h2 id="chown-更改文件目录的所有者，也可以更改所属组"><a href="#chown-更改文件目录的所有者，也可以更改所属组" class="headerlink" title="chown:更改文件目录的所有者，也可以更改所属组"></a>chown:更改文件目录的所有者，也可以更改所属组</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@CentOS6 data]<span class="comment">#ll f1</span></span><br><span class="line">-rw-rw-rw-. 1 root root     0 Oct 21 20:29 f1</span><br><span class="line">[root@CentOS6 data]<span class="comment">#chown xie f1</span></span><br><span class="line">[root@CentOS6 data]<span class="comment">#ll f1</span></span><br><span class="line">-rw-rw-rw-. 1 xie root 0 Oct 21 20:29 f1</span><br></pre></td></tr></table></figure>
<ol>
<li>chgrp [OPTION]… GROUPFILE… 更改所属组<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@CentOS6 data]<span class="comment">#ll f1</span></span><br><span class="line">-rw-rw-rw-. 1 xie root 0 Oct 21 20:29 f1</span><br><span class="line">[root@CentOS6 data]<span class="comment">#ll f1</span></span><br><span class="line">-rw-rw-rw-. 1 xie rpc 0 Oct 21 20:29 f1</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><code>注意：</code></p>
<ol>
<li>普通用户是不能更改文件的所有者的</li>
<li>作为普通用户，要想更改文件的所属组：  <blockquote>
<p>文件是普通用户它自己的<br>如果要更改的组，普通用户必须在这个组里</p>
</blockquote>
</li>
</ol>
<h2 id="umask-文件的权限反向掩码，遮罩码"><a href="#umask-文件的权限反向掩码，遮罩码" class="headerlink" title="umask:文件的权限反向掩码，遮罩码"></a>umask:文件的权限反向掩码，遮罩码</h2><ol>
<li>umask：查看当前umask<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment">#umask</span></span><br><span class="line">0022</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>系统默认为：0022 表示特殊权限、所有者权限、所有组权限、其他人权限<br>更改默认设置位置：/etc/bashrc </p>
<ol start="2">
<li>对文件目录的umask操作 <blockquote>
<p>文件：666-umask 文件默认不能拥有执行权限;如果减得的结果中有执行权限，则需要将其加1<br>文件夹：777-umask</p>
</blockquote>
</li>
</ol>
<h1 id="Linux文件系统上的特殊权限"><a href="#Linux文件系统上的特殊权限" class="headerlink" title="Linux文件系统上的特殊权限"></a>Linux文件系统上的特殊权限</h1><h2 id="SUID"><a href="#SUID" class="headerlink" title="SUID"></a>SUID</h2><p>功能：继承二进制程序所有者的权限<br>权限设定：<br>chmod u+s file…<br>chmod u-s file…<br>chmod 4### file…<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost data]<span class="comment">#ll f1</span></span><br><span class="line">-rw-r--r--. 1 root root 595 Oct 14 14:16 f1</span><br><span class="line">[root@localhost data]<span class="comment">#chmod  u+s f1</span></span><br><span class="line">[root@localhost data]<span class="comment">#ll f1</span></span><br><span class="line">-rwSr--r--. 1 root root 595 Oct 14 14:16 f1</span><br><span class="line">[root@localhost data]<span class="comment">#chmod u-s f1</span></span><br><span class="line">[root@localhost data]<span class="comment">#ll f1</span></span><br><span class="line">-rw-r--r--. 1 root root 595 Oct 14 14:16 f1</span><br><span class="line">[root@localhost data]<span class="comment">#chmod 4644 f1</span></span><br><span class="line">[root@localhost data]<span class="comment">#ll f1        </span></span><br><span class="line">-rwSr--r--. 1 root root 595 Oct 14 14:16 f1</span><br></pre></td></tr></table></figure></p>
<p>SUID只对二进制可执行程序有效<br>SUID设置在目录上无意义</p>
<h2 id="SGID"><a href="#SGID" class="headerlink" title="SGID"></a>SGID</h2><ol>
<li><p>可执行文件上SGID权限<br>功能：继承二进制程序所有组的权限<br>权限设定：<br>chmod g+s file…<br>chmod g-s file…<br>chmod 2### file…  </p>
</li>
<li><p>目录上的SGID权限<br>功能：此目录新建的文件继承目录的所属组<br>权限设定：<br>chmod g+s dir…<br>chmod g-s dir…<br>chmod 2### dir…  </p>
</li>
</ol>
<h2 id="Sticky位"><a href="#Sticky位" class="headerlink" title="Sticky位"></a>Sticky位</h2><p>功能：作用于目录，此目录的文件只能被所有者或root删除<br>权限设定:<br>chmod o+t dir…<br>chmod o-t dir…<br>chmod 1### dir…<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment">#ll -d /tmp</span></span><br><span class="line">drwxrwxrwt. 15 root root 4096 Oct 23 18:33 /tmp</span><br></pre></td></tr></table></figure></p>
<h2 id="权限位映射"><a href="#权限位映射" class="headerlink" title="权限位映射"></a>权限位映射</h2><p>SUID: user,占据属主的执行权限位<br>s： 属主拥有x权限<br>S：属主没有x权限<br>SGID: group,占据属组的执行权限位<br>s： group拥有x权限<br>S： group没有x权限<br>Sticky: other,占据other的执行权限位<br>t： other拥有x权限<br>T： other没有x权限  </p>
<h1 id="访问控制列表"><a href="#访问控制列表" class="headerlink" title="访问控制列表"></a>访问控制列表</h1><p>ACL： Access Control List，实现灵活的权限管理<br>除了文件的所有者，所属组和其它人，可以对更多的用户设置权限<br>CentOS7 默认创建的xfs和ext4文件系统具有ACL功能<br>CentOS7 之前版本，默认手工创建的ext4文件系统无ACL功能,需手动增加<br>tune2fs –o acl /dev/sdb1<br>mount –o acl /dev/sdb1 /mnt/test<br>ACL生效顺序：所有者，自定义用户，自定义组，其他人</p>
<ol>
<li>常见的一些命令<br>setfacl -m u:username:rwx file  为用户的文件赋予访问权限rwx<br>setfacl -m g:groupname:rw file  为组的文件赋予访问权限rwx<br>getfacl filename  查看设置的acl权限<br>setfacl -b filename 清空acl权限<br>setfacl -k dir 删除默认ACL权限<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost data]<span class="comment">#ll f1</span></span><br><span class="line">-rw-r--r--. 1 root root 595 Oct 14 14:16 f1</span><br><span class="line">[root@localhost data]<span class="comment">#setfacl -m u:xie:rw f1</span></span><br><span class="line">[root@localhost data]<span class="comment">#ll f1</span></span><br><span class="line">-rw-rw-r--+ 1 root root 595 Oct 14 14:16 f1  <span class="comment"># +代表有acl权限</span></span><br><span class="line">[root@localhost data]<span class="comment">#getfacl f1</span></span><br><span class="line"><span class="comment"># file: f1</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rw-</span><br><span class="line">user:xie:rw-</span><br><span class="line">group::r--</span><br><span class="line">mask::rw-</span><br><span class="line">other::r--</span><br><span class="line">[root@localhost data]<span class="comment">#setfacl -b f1</span></span><br><span class="line">[root@localhost data]<span class="comment">#ll f1</span></span><br><span class="line">-rw-r--r--. 1 root root 595 Oct 14 14:16 f1</span><br><span class="line">[root@localhost data]<span class="comment">#getfacl f1</span></span><br><span class="line"><span class="comment"># file: f1</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: root</span></span><br><span class="line">user::rw-</span><br><span class="line">group::r--</span><br><span class="line">other::r--</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h1><ol>
<li><p>当用户docker对/testdir 目录无执行权限时，意味着无法做哪些操作？<br>答:无法cd至此目录中；无法查看目录的详细属性；无法查看文件的内容；</p>
</li>
<li><p>当用户mongodb对/testdir 目录无读权限时，意味着无法做哪些操作？<br>答:可使用ls命令获取其下的所有文件列表</p>
</li>
<li><p>当用户redis 对/testdir 目录无写权限时，该目录下的只读文件file1是否可<br>修改和删除？<br>答:不行，文件能不能删除由目录的权限决定的。（rw）</p>
</li>
<li><p>当用户zabbix对/testdir 目录有写和执行权限时，该目录下的只读文件file1<br>是否可修改和删除？<br>答:可以</p>
</li>
<li><p>复制/etc/fstab文件到/var/tmp下，设置文件所有者为tomcat读写权限，所<br>属组为apps组有读写权限，其他人无权限  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">useradd tomcat</span><br><span class="line">groupadd apps</span><br><span class="line">cp /etc/fstab /var/tmp</span><br><span class="line">chown tomcat /var/tmp/fstab</span><br><span class="line">chgrp apps /var/tmp/fstab</span><br><span class="line">chmod 660 /var/tmp/fstab</span><br></pre></td></tr></table></figure>
</li>
<li><p>误删除了用户git的家目录，请重建并恢复该用户家目录及相应的权限属性  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">useradd git</span><br><span class="line">rm -rf /home/git</span><br><span class="line">mkdir /home/git</span><br><span class="line">cp -a /etc/skel/.[^.]* /home/git</span><br><span class="line">chown -R git.git /home/git</span><br><span class="line">chmod 700 /home/git</span><br></pre></td></tr></table></figure>
</li>
<li><p>在/testdir/dir里创建的新文件自动属于webs组，组apps的成员如：<br>tomcat能对这些新文件有读写权限，组dbs的成员如： mysql只能对新文件有读权限，其它用户（不属于webs,apps,dbs）不能访问这个文件夹  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mkdir     -p     /testdir/dir</span><br><span class="line">groupadd webs</span><br><span class="line">chgrp     webs   /testdir/dir</span><br><span class="line">chmod    g+s     /testdir/dir </span><br><span class="line">groupadd apps  </span><br><span class="line">groupadd dbs</span><br><span class="line">useradd -G apps tomcat</span><br><span class="line">useradd -G dbs mysql</span><br><span class="line">setfacl -m g:apps:rw /testdir/dir/</span><br><span class="line">setfacl -m g:dbs:r /testdir/dir/</span><br><span class="line">chmod o= /testdir/dir</span><br></pre></td></tr></table></figure>
</li>
<li><p>备份/testdir/dir里所有文件的ACL权限到/root/acl.txt中，清除/testdir/dir中所有ACL权限，最后还原ACL权限  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">getfacl -R /testdir/dir &gt; /root/acl.txt </span><br><span class="line">setfacl -b /testdir/dir</span><br><span class="line">setfacl -R –<span class="built_in">set</span>-file=acl.txt /testdir/dir</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="https://github.com/xiejia1215225/Pictures/blob/master/Linux%E6%A0%87%E5%BF%97.jpg?raw=true" alt=""></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/05/管道和标准IO/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="谢 佳">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Linux知识库">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/05/管道和标准IO/" itemprop="url">标准IO和管道</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-05T00:00:00+08:00">
                2018-01-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="标准输入和输出"><a href="#标准输入和输出" class="headerlink" title="标准输入和输出"></a>标准输入和输出</h1><h2 id="程序：指令-数据"><a href="#程序：指令-数据" class="headerlink" title="程序：指令+数据"></a>程序：指令+数据</h2><ul>
<li>读入数据：Input  </li>
<li>输出数据：Output  <h2 id="打开的文件都有一个fd-file-descriptor-文件描述符"><a href="#打开的文件都有一个fd-file-descriptor-文件描述符" class="headerlink" title="打开的文件都有一个fd: file descriptor (文件描述符)"></a>打开的文件都有一个fd: file descriptor (文件描述符)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment">#ll /proc/$$/fd</span></span><br><span class="line">total 0</span><br><span class="line">lrwx------ 1 root root 64 Oct 28 14:43 0 -&gt; /dev/pts/2</span><br><span class="line">lrwx------ 1 root root 64 Oct 28 14:43 1 -&gt; /dev/pts/2</span><br><span class="line">lrwx------ 1 root root 64 Oct 28 14:43 2 -&gt; /dev/pts/2</span><br><span class="line">lrwx------ 1 root root 64 Oct 28 19:33 255 -&gt; /dev/pts/2</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Linux给程序提供三种I-O设备"><a href="#Linux给程序提供三种I-O设备" class="headerlink" title="Linux给程序提供三种I/O设备"></a>Linux给程序提供三种I/O设备</h2><p>标准输入（STDIN） －0 默认接受来自键盘的输入<br>标准输出（STDOUT）－1 默认输出到终端窗口<br>标准错误（STDERR）－2 默认输出到终端窗口  </p>
<h1 id="I-O重定向"><a href="#I-O重定向" class="headerlink" title="I/O重定向"></a>I/O重定向</h1><p>改变文件保存的默认位置  </p>
<h2 id="标准输出和错误输出重定向"><a href="#标准输出和错误输出重定向" class="headerlink" title="标准输出和错误输出重定向"></a>标准输出和错误输出重定向</h2><p>格式: 命令 操作符号 文件名  </p>
<p>支持的操作符号包括:<br>> 把STDOUT重定向到文件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@CentOS6 ~]<span class="comment">#ls /data</span></span><br><span class="line">lost+found</span><br><span class="line">[root@CentOS6 ~]<span class="comment">#ls /data &gt; f1.txt   #f1为一空文件</span></span><br><span class="line">[root@CentOS6 ~]<span class="comment">#cat f1.txt</span></span><br><span class="line">lost+found</span><br></pre></td></tr></table></figure></p>
<p>2&gt; 把STDERR重定向到文件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@CentOS6 ~]<span class="comment">#ls /error</span></span><br><span class="line">ls: cannot access /error: No such file or directory</span><br><span class="line">[root@CentOS6 ~]<span class="comment">#ls /error 2&gt; f2.txt</span></span><br><span class="line">[root@CentOS6 ~]<span class="comment">#cat f2.txt </span></span><br><span class="line">ls: cannot access /error: No such file or directory</span><br></pre></td></tr></table></figure></p>
<p>&amp;&gt; 把所有输出重定向到文件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@CentOS6 ~]<span class="comment">#ls /data /error &amp;&gt;f3.txt</span></span><br><span class="line">[root@CentOS6 ~]<span class="comment">#cat f3.txt </span></span><br><span class="line">ls: cannot access /error: No such file or directory</span><br><span class="line">/data:</span><br><span class="line">lost+found</span><br></pre></td></tr></table></figure></p>
<p>> 文件内容会被覆盖<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@CentOS6 ~]<span class="comment">#cat f1.txt </span></span><br><span class="line">lost+found</span><br><span class="line">[root@CentOS6 ~]<span class="comment">#echo 123</span></span><br><span class="line">123</span><br><span class="line">[root@CentOS6 ~]<span class="comment">#echo 123 &gt;f1.txt</span></span><br><span class="line">[root@CentOS6 ~]<span class="comment">#cat f1.txt </span></span><br><span class="line">123</span><br></pre></td></tr></table></figure></p>
<p>>&gt; 原有内容基础上，追加内容<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@CentOS6 ~]<span class="comment">#ls /data &gt;f1.txt </span></span><br><span class="line">[root@CentOS6 ~]<span class="comment">#echo 123 &gt;&gt;f1.txt </span></span><br><span class="line">[root@CentOS6 ~]<span class="comment">#cat f1.txt </span></span><br><span class="line">lost+found</span><br><span class="line">123</span><br></pre></td></tr></table></figure></p>
<p>2&gt; 覆盖重定向错误输出数据流<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@CentOS6 ~]<span class="comment">#cat f2.txt </span></span><br><span class="line">ls: cannot access /error: No such file or directory</span><br><span class="line">[root@CentOS6 ~]<span class="comment">#cdm</span></span><br><span class="line">-bash: cdm: <span class="built_in">command</span> not found</span><br><span class="line">[root@CentOS6 ~]<span class="comment">#cdm 2&gt; f2.txt </span></span><br><span class="line">[root@CentOS6 ~]<span class="comment">#cat f2.txt </span></span><br><span class="line">-bash: cdm: <span class="built_in">command</span> not found</span><br></pre></td></tr></table></figure></p>
<p>2&gt;&gt; 追加重定向错误输出数据流<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]<span class="comment">#ls /error 2&gt;&gt; f2.txt</span></span><br><span class="line">[root@CentOS6 ~]<span class="comment">#cat f2.txt </span></span><br><span class="line">-bash: cdm: <span class="built_in">command</span> not found</span><br><span class="line">ls: cannot access /error: No such file or directory</span><br></pre></td></tr></table></figure></p>
<p>set –C 禁止将内容覆盖已有文件,但可追加<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@CentOS6 ~]<span class="comment">#cat f1.txt </span></span><br><span class="line">lost+found</span><br><span class="line">123</span><br><span class="line">[root@CentOS6 ~]<span class="comment">#set -C</span></span><br><span class="line">[root@CentOS6 ~]<span class="comment">#echo 345 &gt; f1.txt </span></span><br><span class="line">-bash: f1.txt: cannot overwrite existing file</span><br><span class="line">[root@CentOS6 ~]<span class="comment">#echo 345 &gt;&gt; f1.txt </span></span><br><span class="line">[root@CentOS6 ~]<span class="comment">#cat f1.txt </span></span><br><span class="line">lost+found</span><br><span class="line">123</span><br><span class="line">345</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>| file 强制覆盖<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@CentOS6 ~]<span class="comment">#echo 345 &gt;|f1.txt </span></span><br><span class="line">[root@CentOS6 ~]<span class="comment">#cat f1.txt </span></span><br><span class="line">345</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>set +C 允许覆盖<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@CentOS6 ~]<span class="comment">#set +C</span></span><br><span class="line">[root@CentOS6 ~]<span class="comment">#echo 123&gt;f1.txt</span></span><br><span class="line">[root@CentOS6 ~]<span class="comment">#cat f1.txt </span></span><br><span class="line">123</span><br></pre></td></tr></table></figure></p>
<p>标准输出和错误输出各自定向至不同位置<br>COMMAND &gt; /path/to/file.out 2&gt; /path/to/error.out<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@CentOS6 ~]<span class="comment">#ls /data /error &gt;f1.txt 2&gt;f2.txt</span></span><br><span class="line">[root@CentOS6 ~]<span class="comment">#cat f1.txt </span></span><br><span class="line">/data:</span><br><span class="line">lost+found</span><br><span class="line">[root@CentOS6 ~]<span class="comment">#cat f2.txt </span></span><br><span class="line">ls: cannot access /error: No such file or directory</span><br></pre></td></tr></table></figure></p>
<p>合并标准输出和错误输出为同一个数据流进行重定向<br> &amp;&gt; 覆盖重定向<br> &amp;&gt;&gt; 追加重定向<br> COMMAND &gt; /path/to/file.out 2&gt;&amp;1 （顺序很重要）<br> COMMAND &gt;&gt; /path/to/file.out 2&gt;&amp;1   </p>
<p> ()：合并多个程序的STDOUT<br>( cal 2007 ; cal 2008 ) &gt; all.txt</p>
<h2 id="重定向的实验："><a href="#重定向的实验：" class="headerlink" title="重定向的实验："></a>重定向的实验：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">ll a.txt b.txt 将输出一条标准输出和一条标准错误。</span><br><span class="line">如下：</span><br><span class="line">[root@CentOS6 ~]<span class="comment">#ll a.txt</span></span><br><span class="line">-rw-r--r--. 1 root root 2 Oct 28 09:04 a.txt    <span class="comment">#这为内容A</span></span><br><span class="line">[root@CentOS6 ~]<span class="comment">#ll b.txt</span></span><br><span class="line">ls: cannot access b.txt: No such file or directory   <span class="comment">#这为内容B</span></span><br><span class="line"></span><br><span class="line">下面讨论各种变形的输出结果和原因：</span><br><span class="line">1、[root@CentOS6 ~]<span class="comment">#ll a.txt b.txt 1&gt;file 2&gt;&amp;1</span></span><br><span class="line">[root@CentOS6 ~]<span class="comment">#cat file</span></span><br><span class="line">ls: cannot access b.txt: No such file or directory</span><br><span class="line">-rw-r--r--. 1 root root 2 Oct 28 09:04 a.txt </span><br><span class="line">file内容A和B 屏幕内容无 （因为标准输出定向到文件，标准错误定向到标准输出，所以也定向到文件）</span><br><span class="line"></span><br><span class="line">2、[root@CentOS6 ~]<span class="comment">#ll a.txt b.txt 2&gt;&amp;1 1&gt;file</span></span><br><span class="line">ls: cannot access b.txt: No such file or directory</span><br><span class="line">[root@CentOS6 ~]<span class="comment">#cat file </span></span><br><span class="line">-rw-r--r--. 1 root root 2 Oct 28 09:04 a.txt</span><br><span class="line">file内容A 屏幕输出B （因为标准错误重定向到了标准输出即屏幕上输出，标准输出定向到文件）</span><br><span class="line"></span><br><span class="line">3、[root@CentOS6 ~]<span class="comment">#ll a.txt b.txt 2&gt;file 1&gt;&amp;2</span></span><br><span class="line">[root@CentOS6 ~]<span class="comment">#cat file </span></span><br><span class="line">ls: cannot access b.txt: No such file or directory</span><br><span class="line">-rw-r--r--. 1 root root 2 Oct 28 09:04 a.txt </span><br><span class="line">file内容A和B 屏幕内容无（因为标准错误定向到文件，标准输出定向到标准错误，所以也定向到文件）</span><br><span class="line"></span><br><span class="line">4、[root@CentOS6 ~]<span class="comment">#ll a.txt b.txt 1&gt;&amp;2 2&gt;file</span></span><br><span class="line">-rw-r--r--. 1 root root 2 Oct 28 09:04 a.txt</span><br><span class="line">[root@CentOS6 ~]<span class="comment">#cat file </span></span><br><span class="line">ls: cannot access b.txt: No such file or directory </span><br><span class="line">file内容A 屏幕输出B（因为标准输出定向到了标准错误即屏幕，标准错误定向到文件）</span><br><span class="line"></span><br><span class="line">5、[root@CentOS6 ~]<span class="comment">#ll a.txt b.txt 1&gt;file 1&gt;&amp;2</span></span><br><span class="line">ls: cannot access b.txt: No such file or directory</span><br><span class="line">-rw-r--r--. 1 root root 2 Oct 28 09:04 a.txt</span><br><span class="line">[root@CentOS6 ~]<span class="comment">#cat file </span></span><br><span class="line">[root@CentOS6 ~]<span class="comment"># </span></span><br><span class="line">file内容无 屏幕内容A和B （因为标准输出定向到文件，标准输出又定向的标准错误即屏幕，覆盖了1&gt;file，所以file内容无）</span><br><span class="line"></span><br><span class="line">6、[root@CentOS6 ~]<span class="comment">#ll a.txt b.txt 2&gt;file 2&gt;&amp;1</span></span><br><span class="line">ls: cannot access b.txt: No such file or directory</span><br><span class="line">-rw-r--r--. 1 root root 2 Oct 28 09:04 a.txt</span><br><span class="line">[root@CentOS6 ~]<span class="comment">#cat file </span></span><br><span class="line">[root@CentOS6 ~]<span class="comment"># </span></span><br><span class="line">file内容无 屏幕内容A和B （因为标准错误定向到文件，标准错误又定向到标准输出即屏幕，覆盖了2&gt;file，所以file内容无）</span><br></pre></td></tr></table></figure>
<h2 id="输入重定向"><a href="#输入重定向" class="headerlink" title="输入重定向"></a>输入重定向</h2><p>使用 &lt; 来重定向标准输入  </p>
<ul>
<li><p>某些命令能够接受从文件中导入的STDIN  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tr <span class="string">'a-z'</span> <span class="string">'A-Z'</span>&lt; /etc/issue   <span class="comment"># 该命令会把/etc/issue中的小写字符都转换成写写字符</span></span><br><span class="line">tr -d <span class="string">'abc'</span> &lt; /etc/fstab 删除fstab文件中的所有abc中任意字符</span><br></pre></td></tr></table></figure>
</li>
<li><p>键盘输入</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; file</span><br><span class="line">mage</span><br><span class="line">wangxiaochun</span><br><span class="line">按ctrl+d离开</span><br></pre></td></tr></table></figure>
</li>
<li><p>可以使用文件来代替键盘的输入</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cat &gt; filea &lt; fileb     <span class="comment">#把fileb的文件内容重定向输入到filea中</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>把多行发送给STDIN<br>使用“&lt;&lt;终止词”命令从键盘把多行重导向给STDIN,直到 终止词 位置的所有文本都发送给STDIN<br>有时被称为就地文本（heretext）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mail -s <span class="string">"Please Call"</span> &lt;&lt;END</span><br><span class="line">&gt; Hi,</span><br><span class="line">&gt;</span><br><span class="line">&gt; Please give me a call when you get <span class="keyword">in</span>. We may need</span><br><span class="line">&gt; to <span class="keyword">do</span> some maintenance on server1.</span><br><span class="line">&gt;</span><br><span class="line">&gt; Details when you<span class="string">'re on-site</span></span><br><span class="line"><span class="string">&gt; END</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="tr命令"><a href="#tr命令" class="headerlink" title="tr命令"></a>tr命令</h1><p>转换和删除字符</p>
<p>语法： tr [OPTION]… SET1 [SET2]<br>选项：<br>​        -c 或 ——complerment：取代所有不属于第一字符集的字符；<br>​        -d 或 ——delete：删除所有属于第一字符集的字符；<br>​        -s 或 –squeeze-repeats：把连续重复的字符以单独一个字符表示；<br>​        -t 或 –truncate-set1：先删除第一字符集较第二字符集多出的字符。  </p>
<p>[:alnum:]：字母和数字<br>[:alpha:]：字母<br>[:cntrl:]：控制（非打印）字符<br>[:digit:]：数字<br>[:graph:]：图形字符<br>[:lower:]：小写字母<br>[:print:]：可打印字符<br>[:punct:]：标点符号<br>[:space:]：空白字符<br>[:upper:]：大写字母<br>[:xdigit:]：十六进制字符</p>
<p>实例：<br>​        # echo “TANK” |tr A-Z a-z   #大写字母转小写<br>​        # echo “hello 123 world 456” | tr -d ‘0-9’  #删除字符串中的数字<br>​        # cat text | tr ‘\t’ ‘ ‘      #将制表符转换成空格<br>​        # echo “aa.,a 1 b#$bb 2 c*/cc 3 ddd 4” | tr -dc ‘0-9 \n’  # 删除除数字外的字符<br>​        # tr ‘[:lower:]’ ‘[:upper:]’     #将小写字符转换成大写字符</p>
<h1 id="管道"><a href="#管道" class="headerlink" title="管道"></a>管道</h1><p>连接程序，实现将前一个命令的输出直接定向后一个程序当作输入数据流<br>管道左边的命令必须要有标准输出的功能，管道右边的命令一道要有标准输入功能的否者没有意义。  </p>
<p>管道（使用符号“|”表示）用来连接命令<br>命令1 | 命令2 | 命令3 | …  </p>
<blockquote>
<p>将命令1的STDOUT发送给命令2的STDIN，命令2的STDOUT发送到命令3的STDIN<br>STDERR默认不能通过管道转发，可利用2&gt;&amp;1 或 |&amp; 实现<br>最后一个命令会在当前shell进程的子shell进程中执行用来<br>组合多种工具的功能<br>ls | tr ‘a-z’ ‘A-Z<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">less ：一页一页地查看输入  </span><br><span class="line">ls -l /etc | less</span><br><span class="line">mail： 通过电子邮件发送输入  </span><br><span class="line"><span class="built_in">echo</span> <span class="string">"test email"</span> | mail -s <span class="string">"test"</span> user@example.com  </span><br><span class="line">lpr：把输入发送给打印机  </span><br><span class="line"><span class="built_in">echo</span> <span class="string">"test print"</span> | lpr -P printer_name</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="重定向到多个目标（tee）"><a href="#重定向到多个目标（tee）" class="headerlink" title="重定向到多个目标（tee）"></a>重定向到多个目标（tee）</h1><p>命令1 | tee [-a ] 文件名 | 命令2<br>把命令1的STDOUT保存在文件中，做为命令2的输入<br>-a 追加</p>
<ul>
<li>使用：<blockquote>
<p>保存不同阶段的输出<br>复杂管道的故障排除<br>同时查看和记录输出  </p>
</blockquote>
</li>
</ul>
<h1 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h1><ol>
<li><p>将/etc/issue文件中的内容转换为大写后保存至/tmp/issue.out文件中  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/issue | tr <span class="string">"[a-z]"</span> <span class="string">"[A-Z]"</span> &gt;/tmp/issue.out</span><br></pre></td></tr></table></figure>
</li>
<li><p>将当前系统登录用户的信息转换为大写后保存至/tmp/who.out文件中 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">who | tr <span class="string">"[a-z]"</span> <span class="string">"[A-Z]"</span> &gt;/tmp/who.out</span><br></pre></td></tr></table></figure>
</li>
<li><p>一个linux用户给root发邮件，要求邮件标题为”help”，邮件正文如下：<br>Hello, I am 用户名,The system version is here,pleasehelp me to check it ,thanks! 操作系统版本信息  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mail -s <span class="string">"root"</span> &lt;&lt;EOF</span><br><span class="line">&gt; hello,i am <span class="variable">$user</span></span><br><span class="line">&gt; The system version is here,please <span class="built_in">help</span> me to check it,thanks!</span><br><span class="line">&gt;cat /etc/centos-release</span><br><span class="line">&gt;EOF</span><br></pre></td></tr></table></figure>
</li>
<li><p>将/root/下文件列表，显示成一行，并文件名之间用空格隔开  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls /root | tr <span class="string">"\n"</span> <span class="string">" "</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>计算1+2+3+..+99+100的总和  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> &#123;1..100&#125; | tr -s <span class="string">" "</span> <span class="string">"+"</span> | bc</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除Windows文本文件中的‘^M’字符  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tr -d <span class="string">"\15"</span> win.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>处理字符串“xt.,l 1 jr#!$mn2 c*/fe3 uz4”，只保留其中的数字和空格 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"xt.,l 1 jr#bcmn2 c*/fe3 uz4"</span> | tr -d <span class="string">"[[:alpha:]]"</span> | tr -d <span class="string">"[[:punct:]]"</span> </span><br><span class="line">或者</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"xt.,l 1 jr#bcmn2 c*/fe3 uz4"</span> |tr -dc <span class="string">"[:digit:][:space:]"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>将PATH变量每个目录显示在独立的一行 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span> |tr -s <span class="string">":"</span> <span class="string">"\n"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>将指定文件中0-9分别替代成a-j  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">先创建文件touch f1 </span><br><span class="line">给f1 vim 输入0-9 </span><br><span class="line">cat f1 | tr <span class="string">"[0-9]"</span> <span class="string">"[a-j]"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>将文件/etc/centos-release中每个单词（由字母组成）显示在独立一行，并无空行  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/centos-release | tr -s <span class="string">" "</span> <span class="string">"\n"</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="https://github.com/xiejia1215225/Pictures/blob/master/Linux%E6%A0%87%E5%BF%97.jpg?raw=true" alt=""></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/20/Hello Linux basics/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="谢 佳">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Linux知识库">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/20/Hello Linux basics/" itemprop="url">Hello Linux basics</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-12-20T00:00:00+08:00">
                2017-12-20
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index">
                    <span itemprop="name">linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="计算机硬件组成"><a href="#计算机硬件组成" class="headerlink" title="计算机硬件组成"></a>计算机硬件组成</h1><p>&ensp;&ensp;&ensp;&ensp;根据冯·诺依曼体系结构，我们知道现代计算机硬件由控制器、运算器、存储器、输入设备和输出设备五大部分组成。<br>&ensp;&ensp;&ensp;&ensp;控制器：控制器是整个计算机的中枢神经，其功能是对程序规定的控制信息进行解释，并根据具体要求进行控制、调度程序、数据、地址，协调计 算机各个部分工作，协调计算机各部分工作及内存、IO设备等的访问<br>&ensp;&ensp;&ensp;&ensp;运算器：对数据进行各种算数运算和逻辑运算也就是对数据进行加工，在现代计算机系统中将控制器和运算器合并在一起组成CPU。<br>&ensp;&ensp;&ensp;&ensp;存储器：存储器是存储程序、数据和各种信号、命令等信息，并在需要的时候提供这些信息；在现代计算机系统中就是内存。<br>&ensp;&ensp;&ensp;&ensp;输入设备:就是将程序、原始数据、文字、字符、控制命令或现场采集的数据等信息输入到计算机；比如键盘、鼠标等<br>&ensp;&ensp;&ensp;&ensp;输出设备：就是将程序、原始数据、文字、字符、控制命令或现场采集的数据等信息进行输出；比如显示器、打印机等</p>
<h2 id="Linux发行版"><a href="#Linux发行版" class="headerlink" title="Linux发行版"></a>Linux发行版</h2><p> <strong><em>slackware:</em></strong>  </p>
<ul>
<li>SUSE Linux Enterprise Server (SLES)  </li>
<li><p>OpenSuse桌面</p>
<p><strong><em>debian:</em></strong></p>
</li>
<li>ubuntu</li>
<li><p>mint  </p>
<p><strong><em>redhat:</em></strong> </p>
</li>
<li>RedHat Enterprise Linux:<br>红帽推出的收费的技术支持和更新的linux发行版，适用于企业服务器版Linux，稳定、安全。  </li>
<li>CentOS:centos可以说是社区维护的RHEL克隆版本，免费使用。   </li>
<li>Fedora:由社区维护的适用于个人桌面的Linux发行版  </li>
</ul>
<p><strong><em>ArchLinux:</em></strong> 轻量简洁<br><strong><em>Gentoo:</em></strong> 极致性能，不提供传统意义的安装程序<br><strong><em>LFS:</em></strong> Linux From scratch 自制Linux<br><strong><em>Android:</em></strong> kernel+busybox（工具集）+java虚拟机  </p>
<h1 id="Linux的哲学思想"><a href="#Linux的哲学思想" class="headerlink" title="Linux的哲学思想"></a>Linux的哲学思想</h1><ul>
<li>一切都是一个文件（包括硬件)  </li>
<li>小型，单一用途的程序  </li>
<li>链接程序，共同完成复杂的任务  </li>
<li>避免令人困惑的用户界面  </li>
<li>配置数据存储在文本中<h1 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h1><h2 id="echo"><a href="#echo" class="headerlink" title="echo"></a><strong><em>echo</em></strong></h2><code>主要是用于显示信息的</code><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@CentOS7 data]<span class="comment">#man echo</span></span><br><span class="line">ECHO(1)        User Commands        ECHO(1)</span><br><span class="line"></span><br><span class="line">NAME</span><br><span class="line">       <span class="built_in">echo</span> - display a line of text</span><br><span class="line"></span><br><span class="line">SYNOPSIS</span><br><span class="line">       <span class="built_in">echo</span> [SHORT-OPTION]... [STRING]...</span><br><span class="line">       <span class="built_in">echo</span> LONG-OPTION</span><br><span class="line"></span><br><span class="line">DESCRIPTION</span><br><span class="line">       Echo  the STRING(s) to standard out‐</span><br><span class="line">       put.</span><br><span class="line"></span><br><span class="line">       -n     <span class="keyword">do</span> not  output  the  trailing</span><br><span class="line">              newline</span><br><span class="line"></span><br><span class="line">       -e     <span class="built_in">enable</span>    interpretation   of</span><br><span class="line">              backslash escapes</span><br><span class="line"></span><br><span class="line">       -E     <span class="built_in">disable</span>   interpretation   of</span><br><span class="line">              backslash escapes (default)</span><br><span class="line"></span><br><span class="line">       --<span class="built_in">help</span> display this <span class="built_in">help</span> and <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">       --version</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>下面说明一些重要参数：</p>
<ul>
<li>-E  （默认）不支持\解释功能  </li>
<li>-n   不自动换行  </li>
<li>-e   启用\字符的解释功能</li>
</ul>
<p><code>启用命令选项-e，若字符串中出现以下字符，则特别加以处理，而不会将它当成一般文字输出</code>  </p>
<ul>
<li>\a     发出警告声</li>
<li>\b     退格键  </li>
<li>\c     最后不加上换行符号  </li>
<li>\n     换行且光标移至行首  </li>
<li>\r     回车，即光标移至行首，但不换行  </li>
<li>\t     插入tab  </li>
<li>\ \    插入\字符  </li>
<li>\0nnn  插入nnn（八进制）所代表的ASCII字符  </li>
<li>\xHH   插入HH（十六进制）所代表的ASCII数字（man 7 ascii）</li>
</ul>
<h2 id="date"><a href="#date" class="headerlink" title="date"></a><strong><em>date</em></strong></h2><p><code>主要是显示操作系统的时间</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@CentOS7 data]<span class="comment">#date --help</span></span><br><span class="line">Usage: date [OPTION]... [+FORMAT]</span><br><span class="line">  or:  date [-u|--utc|--universal] [MMDDhhmm[[CC]YY][.ss]]</span><br><span class="line">Display the current time <span class="keyword">in</span> the given FORMAT, or <span class="built_in">set</span> the system date</span><br></pre></td></tr></table></figure></p>
<p>下面说明一些重要参数：</p>
<ol>
<li><p>-d   显示字符串所指的日期与时间,如果不指定，默认为当前系统时间。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@CentOS7 data]<span class="comment">#date</span></span><br><span class="line">Sun Sep 23 15:12:28 CST 2018</span><br></pre></td></tr></table></figure>
</li>
<li><p>-s   根据字符串指定的日期、时间设定为当前的系统时间。</p>
</li>
<li>-d @ 把秒转化成具体的年月日，从1970年1月1号00：00:00算起<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@CentOS7 data]<span class="comment">#date -d @1537687300</span></span><br><span class="line">Sun Sep 23 15:21:40 CST 2018</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>如果需要以指定的格式显示日期或者日期，可以使用date “+”开头的字符串指定其格式，最常用的格式如下:<br>%n : 下一行<br>%t : 跳格<br>%H : 小时(00-23)<br>%M : 分钟(00-59)<br>%p : 显示本地 AM 或 PM<br>%r : 直接显示时间 (12 小时制，格式为 hh:mm:ss [AP]M)<br>%s : 从 1970 年 1 月 1 日 00:00:00 UTC 到目前为止的秒数<br>%S : 秒(00-60)<br>%T : 直接显示时间 (24 小时制)<br>%X : 相当于 %H:%M:%S<br>%Z : 显示时区<br>%d : 日 (01-31)<br>%D : 直接显示日期 (mm/dd/yy))<br>%m : 月份 (01-12)<br>%Y : 完整年份 (0000-9999)<br>%F : full date;相当于年月日<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@CentOS7 data]<span class="comment">#date +"%F %T"</span></span><br><span class="line">2018-09-23 15:33:21</span><br></pre></td></tr></table></figure></p>
<h2 id="history"><a href="#history" class="headerlink" title="history"></a><strong><em>history</em></strong></h2><p><code>主要显示历史命令记录，或者下达历史纪录中的指令</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@CentOS7 data]<span class="comment">#help history</span></span><br><span class="line"><span class="built_in">history</span>: <span class="built_in">history</span> [-c] [-d offset] [n] or <span class="built_in">history</span> -anrw [filename] or <span class="built_in">history</span> -ps arg [arg...]</span><br><span class="line">    Display or manipulate the <span class="built_in">history</span> list.</span><br><span class="line">    </span><br><span class="line">    Display the <span class="built_in">history</span> list with line numbers, prefixing each modified</span><br><span class="line">    entry with a `*<span class="string">'.  An argument of N lists only the last N entries.</span></span><br></pre></td></tr></table></figure></p>
<p>其中一些重要的参数：<br>n 　数字,表示要列出最近的 n 条历史<br>-c ：清空命令历史<br>-a ：追加本次会话新执行的命令历史列表至历史文件<br>-r ：读历史文件附加到历史列表<br>-w ：保存历史列表到指定的历史文件<br>-n: 读历史文件中未读过的行到历史列表<br>-p: 展开历史参数成多行，但不存在历史列表中<br>-s: 展开历史参数成一行，附加在历史列表后<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@CentOS7 ~]<span class="comment">#cat .bash_history </span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"><span class="built_in">history</span></span><br><span class="line">uname -r</span><br><span class="line">cat /etc/centos-release</span><br><span class="line"><span class="built_in">history</span></span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure></p>
<p>上图可以查看文件中的历史</p>
<h1 id="Bash的快捷键"><a href="#Bash的快捷键" class="headerlink" title="Bash的快捷键"></a>Bash的快捷键</h1><ul>
<li>Ctrl + l  清屏，相当于clear命令</li>
<li>Ctrl + o  执行当前命令，并重新显示本命令</li>
<li>Ctrl + s  阻止屏幕输出，锁定</li>
<li>Ctrl + q  允许屏幕输出</li>
<li>Ctrl + c  终止命令</li>
<li>Ctrl + z  挂起命令</li>
<li>Ctrl + a  光标移到命令行首，相当于Home</li>
<li>Ctrl + e  光标移到命令行尾，相当于End</li>
<li>Ctrl + f  光标向右移动一个字符，相当于右方向键</li>
<li>Ctrl + b  光标向左移动一个字符，相当于左方向键</li>
<li>Alt + f  光标向右移动一个单词尾</li>
<li>Alt + b  光标向左移动一个单词首</li>
<li>Ctrl + x x光标在命令行首和光标之间移动</li>
<li>Ctrl + u 从光标处删除至命令行首</li>
<li>Ctrl + k 从光标处删除至命令行尾</li>
<li>Alt + r  删除当前整行</li>
<li>Ctrl + w 从光标处向左删除至单词首</li>
<li>Alt + d  从光标处向右删除至单词尾</li>
<li>Ctrl + d 删除光标处的一个字符</li>
<li>Ctrl + h 删除光标前的一个字符</li>
<li>Ctrl + y 将删除的字符粘贴至光标后</li>
<li>Alt + c  从光标处开始向右更改为首字母大写的单词</li>
<li>Alt + u  从光标处开始，将右边一个单词更改为大写</li>
<li>Alt + l  从光标处开始，将右边一个单词更改为小写</li>
<li>Ctrl + t 交换光标处和之前的字符位置</li>
<li>Alt + t  交换光标处和之前的单词位置</li>
<li>Alt + N  提示输入指定字符后，重复显示该字符N次</li>
</ul>
<p><img src="https://github.com/xiejia1215225/Pictures/blob/master/Linux%E6%A0%87%E5%BF%97.jpg?raw=true" alt=""></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="谢 佳">
            
              <p class="site-author-name" itemprop="name">谢 佳</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">15</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">31</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">谢 佳</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  


</body>
</html>
